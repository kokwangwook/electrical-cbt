# 🚀 전기기능사 CBT 시스템 운영 가이드

## 📍 서비스 정보

- **프로덕션 URL**: https://www.ecbt.kr
- **관리자 페이지**: https://www.ecbt.kr/admin
- **관리자 비밀번호**: 코드에서 확인 (`src/pages/Admin.tsx`)
- **배포 상태**: ✅ 운영 중
- **백엔드**: Supabase

---

## 📊 서비스 현황 모니터링

### 1. 일일 체크리스트

#### 서비스 가용성 확인
- [ ] 메인 페이지 접속 확인 (https://www.ecbt.kr)
- [ ] 로그인 기능 테스트
- [ ] 시험 시작 기능 테스트
- [ ] 관리자 페이지 접속 확인

#### 데이터베이스 상태 확인
- [ ] Supabase 대시보드 접속
- [ ] 문제 데이터 수 확인
- [ ] 로그인 기록 확인
- [ ] 에러 로그 확인

#### 성능 모니터링
- [ ] 페이지 로딩 속도 확인
- [ ] API 응답 시간 확인
- [ ] Supabase 쿼리 성능 확인

### 2. 주간 체크리스트

#### 데이터 백업
- [ ] Supabase 데이터 백업 확인
- [ ] 문제 데이터 수동 백업 (JSON)
- [ ] 회원 데이터 백업

#### 사용량 통계
- [ ] 주간 로그인 횟수 확인
- [ ] 시험 응시 횟수 확인
- [ ] 문제 추가/수정 이력 확인

#### 보안 점검
- [ ] 관리자 비밀번호 변경 여부 확인
- [ ] Supabase API 키 보안 확인
- [ ] 환경 변수 보안 확인

---

## 🔧 일반적인 유지보수 작업

### 1. 문제 데이터 관리

#### 새 문제 추가
1. 관리자 페이지 접속 (https://www.ecbt.kr/admin)
2. "문제 관리" 탭 선택
3. "문제 추가" 버튼 클릭
4. 문제 정보 입력
5. 저장

#### 문제 수정
1. 문제 목록에서 수정할 문제 찾기
2. "수정" 버튼 클릭
3. 정보 수정 후 저장

#### 문제 일괄 적용
- 출제기준 일괄 적용: "📚 모든 문제에 출제기준 일괄 적용" 버튼 사용
- Google Sheets 동기화: "동기화" 탭에서 실행

### 2. 회원 관리

#### 새 회원 추가
1. 관리자 페이지 → "회원 관리" 탭
2. "회원 추가" 버튼 클릭
3. 회원 정보 입력
4. 저장

#### 회원 정보 수정
1. 회원 목록에서 수정할 회원 찾기
2. "수정" 버튼 클릭
3. 정보 수정 후 저장

### 3. 데이터 동기화

#### Google Sheets → Supabase
1. 관리자 페이지 → "동기화" 탭
2. "Google Sheets에서 가져오기" 버튼 클릭
3. 동기화 모드 선택 (병합/교체)
4. 완료 대기

#### Supabase → LocalStorage
- 자동으로 처리됨 (로그인 시)
- 수동 동기화: 관리자 페이지에서 "Supabase 연결 확인" 후 "Supabase로 이전" 실행

---

## 🐛 문제 해결 가이드

### 문제 1: 페이지가 로드되지 않음

**증상**: 404 에러 또는 빈 화면

**해결 방법**:
1. Vercel/Netlify 대시보드에서 배포 상태 확인
2. 최근 배포 로그 확인
3. 환경 변수 확인 (`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`)
4. 브라우저 캐시 삭제 후 재시도

### 문제 2: Supabase 연결 실패

**증상**: "Missing Supabase environment variables" 에러

**해결 방법**:
1. 배포 플랫폼의 환경 변수 설정 확인
2. 변수명이 `VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`인지 확인
3. Supabase 대시보드에서 API 키 확인
4. 재배포 실행

### 문제 3: 문제 데이터가 표시되지 않음

**증상**: 문제 목록이 비어있음

**해결 방법**:
1. Supabase 대시보드에서 `questions` 테이블 확인
2. 관리자 페이지에서 "Supabase 연결 확인" 실행
3. 데이터가 없으면 "Supabase로 이전" 실행
4. Google Sheets에서 동기화 실행

### 문제 4: 로그인이 안 됨

**증상**: 로그인 후 홈 화면으로 이동하지 않음

**해결 방법**:
1. 브라우저 개발자 도구 콘솔 확인
2. LocalStorage 확인 (`localStorage.getItem('currentUser')`)
3. Supabase `members` 테이블 확인
4. 브라우저 캐시 삭제 후 재시도

### 문제 5: 시험 중 데이터 저장 실패

**증상**: 시험 진행 중 답안이 저장되지 않음

**해결 방법**:
1. 브라우저 LocalStorage 용량 확인
2. 다른 탭에서 LocalStorage 사용량 확인
3. 브라우저 캐시 삭제
4. 시험 세션 복구 기능 사용

---

## 📈 성능 최적화

### 1. 데이터베이스 최적화

#### 인덱스 확인
Supabase 대시보드에서 다음 인덱스가 있는지 확인:
- `questions.category` 인덱스
- `questions.standard` 인덱스
- `members.id` 인덱스 (기본 키)

#### 쿼리 최적화
- 카테고리별 문제 조회 시 `limit()` 사용
- 불필요한 데이터 조회 방지 (`select()` 사용)

### 2. 프론트엔드 최적화

#### 이미지 최적화
- 문제 이미지는 50KB 이하로 압축
- Base64 인코딩 사용
- 필요시 CDN 사용 고려

#### 코드 분할
- 페이지별 코드 분할 (이미 구현됨)
- Lazy loading 사용 (필요시)

---

## 🔐 보안 관리

### 1. 관리자 비밀번호

**비밀번호 위치**: `src/pages/Admin.tsx` 파일의 `ADMIN_PASSWORD` 상수

**변경 방법**:
1. `src/pages/Admin.tsx` 파일 열기
2. `ADMIN_PASSWORD` 상수 수정
3. 빌드 및 재배포

### 2. Supabase API 키

**보안 주의사항**:
- API 키는 환경 변수로만 관리
- 코드에 직접 하드코딩하지 않음
- Git 저장소에 커밋하지 않음 (`.env` 파일은 `.gitignore`에 포함)

### 3. CORS 설정

Supabase 대시보드에서 다음 도메인 허용:
- `https://www.ecbt.kr`
- `https://ecbt.kr` (서브도메인)

---

## 📊 모니터링 도구

### 1. Supabase 대시보드

**확인 항목**:
- 데이터베이스 사용량
- API 요청 수
- 에러 로그
- 실시간 쿼리 모니터링

**접속**: https://supabase.com/dashboard

### 2. Vercel/Netlify 대시보드

**확인 항목**:
- 배포 상태
- 빌드 로그
- 트래픽 통계
- 에러 로그

### 3. 브라우저 개발자 도구

**확인 항목**:
- 콘솔 에러
- 네트워크 요청
- LocalStorage 사용량
- 성능 프로파일

---

## 🔄 업데이트 프로세스

### 1. 코드 업데이트

```bash
# 1. 로컬에서 변경사항 테스트
npm run dev

# 2. 빌드 테스트
npm run build

# 3. Git 커밋 및 푸시
git add .
git commit -m "업데이트 내용"
git push origin main

# 4. 자동 배포 (Vercel/Netlify)
# GitHub 푸시 시 자동으로 배포됨
```

### 2. 데이터베이스 마이그레이션

**주의**: 프로덕션 데이터베이스 변경 시 백업 필수!

1. Supabase 대시보드에서 백업 다운로드
2. 마이그레이션 SQL 실행
3. 데이터 검증
4. 문제 발생 시 롤백

### 3. 환경 변수 업데이트

1. 배포 플랫폼 대시보드 접속
2. 환경 변수 설정 페이지로 이동
3. 변수 수정 또는 추가
4. 재배포 실행 (자동 또는 수동)

---

## 📞 지원 및 문의

### 문제 발생 시

1. **즉시 확인 사항**:
   - 서비스 접속 가능 여부
   - Supabase 연결 상태
   - 최근 배포 이력

2. **로그 확인**:
   - 브라우저 콘솔
   - Supabase 에러 로그
   - 배포 플랫폼 빌드 로그

3. **롤백 방법**:
   - 배포 플랫폼에서 이전 버전으로 롤백
   - Supabase 데이터 복원 (백업 있으면)

---

## 📝 체크리스트 템플릿

### 일일 점검 (매일 오전)

```
[ ] 메인 페이지 접속 확인
[ ] 로그인 기능 테스트
[ ] 시험 시작 기능 테스트
[ ] Supabase 연결 확인
[ ] 에러 로그 확인
```

### 주간 점검 (매주 월요일)

```
[ ] 데이터 백업 실행
[ ] 사용량 통계 확인
[ ] 성능 모니터링
[ ] 보안 점검
[ ] 문제 데이터 검증
```

### 월간 점검 (매월 1일)

```
[ ] 전체 기능 테스트
[ ] 데이터베이스 최적화
[ ] 코드 업데이트 확인
[ ] 보안 업데이트 확인
[ ] 사용자 피드백 검토
```

---

## 🎯 성공 지표

### 목표 지표

- **가용성**: 99% 이상
- **평균 응답 시간**: 2초 이하
- **에러율**: 1% 이하
- **사용자 만족도**: 피드백 기반

### 모니터링 방법

1. **가용성**: Uptime Robot 또는 유사 서비스 사용
2. **응답 시간**: Supabase 대시보드 + 브라우저 개발자 도구
3. **에러율**: Supabase 에러 로그 + 브라우저 콘솔
4. **사용자 만족도**: 관리자 페이지 피드백 기능

---

## ✅ 운영 체크리스트 (최초 설정)

배포 후 다음 항목들을 확인하세요:

- [x] 도메인 연결 확인 (www.ecbt.kr)
- [ ] SSL 인증서 확인 (HTTPS)
- [ ] 환경 변수 설정 확인
- [ ] Supabase 연결 테스트
- [ ] 관리자 페이지 접속 테스트
- [ ] 문제 데이터 확인
- [ ] 회원 데이터 확인
- [ ] 시험 기능 전체 테스트
- [ ] 모바일 반응형 확인
- [ ] 성능 테스트 (로딩 속도)
- [ ] 에러 로깅 설정 확인

---

**마지막 업데이트**: 2025-01-15  
**서비스 상태**: ✅ 운영 중  
**다음 점검일**: 매일 오전 9시

